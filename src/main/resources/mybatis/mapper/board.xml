<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<!-- mapper와 dao 인터페이스 연결 -->
<!-- mybatis가 dao 인터페이스의 구현클래스(객체) 생성 -> 관리객체로 만듦 -->
<mapper namespace="com.mycompany.springframework.dao.mybatis.Ch13BoardDao">
	<!-- id: 인터페이스(DAO)의 추상메서드 -->
	<!-- 	parameterType
			- mapper-config.xml에서 정의한 alias 이름..이면서 
			- 인터페이스(DAO) 추상메서드의 매개변수가 됨 -->
	<insert id="insert" parameterType="Board">
	 	<!-- keyProperty에  'seq_bno.nextval' 저장-->
		<selectKey keyProperty="bno" resultType="int" order="BEFORE">
			select seq_bno.nextval from dual
		</selectKey>
		insert into board (
			bno, btitle, bcontent, bdate, mid, bhitcount, 
         	battachoname, battachsname, battachtype, battachdata
		) values (
			#{bno}, #{btitle}, #{bcontent}, sysdate, #{mid},  0,
			#{battachoname}, #{battachsname},	#{battachtype},	#{battachdata}
		)
	</insert>
	
	<select id="selectList" resultType="Board">
		select bno, btitle, bdate, mid, bhitcount
		from board
	</select>
</mapper>
